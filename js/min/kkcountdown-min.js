(function(){var t;t=function(){function t(t,s){var o;o=this,this.opts=$.extend({},this.defaults,s),this.$el=$(t),this.countdowns=[],this.prepareHTML(),this.countdownInit(this.$el),this.$el.on("countdown:reset",function(){return o.reset(o.$el)})}return t.prototype.version="1.4.2",t.prototype.defaults={dayText:"day ",days2Text:"days ",daysText:"days ",hourText:"hour ",hours2Text:"hours ",hoursText:"hours ",minutesText:":",secondsText:"",textAfterCount:"---",oneDayClass:!1,displayDays:!0,displayZeroDays:!0,addClass:!1,callback:!1,warnSeconds:60,warnClass:!1,rusNumbers:!1,boxContenerClass:"kkcountdown-box",boxDaysClass:"kkc-days",boxHoursClass:"kkc-hours",boxMinClass:"kkc-min",boxSecClass:"kkc-sec",boxDaysTextClass:"kkc-days-text",boxHoursTextClass:"kkc-hours-text",boxMinTextClass:"kkc-min-text",boxSecTextClass:"kkc-sec-text"},t.prototype.prepareHTML=function(){var t,s,o,e,a,n,d,r,l,i;return i=this,t=$(document.createElement("span")).addClass(i.opts.boxContenerClass),s=$(document.createElement("span")).addClass(i.opts.boxDaysClass),e=$(document.createElement("span")).addClass(i.opts.boxHoursClass),n=$(document.createElement("span")).addClass(i.opts.boxMinClass),r=$(document.createElement("span")).addClass(i.opts.boxSecClass),o=$(document.createElement("span")).addClass(i.opts.boxDaysTextClass),a=$(document.createElement("span")).addClass(i.opts.boxHoursTextClass),d=$(document.createElement("span")).addClass(i.opts.boxMinTextClass),l=$(document.createElement("span")).addClass(i.opts.boxSecTextClass),i.opts.addClass&&t.addClass(i.opts.addClass),a.html(i.opts.hoursText),d.html(i.opts.minutesText),l.html(i.opts.secondsText),t.append(s).append(o).append(e).append(a).append(n).append(d).append(r).append(l),this.$el.append(t)},t.prototype.reset=function(t){return void 0!==t.id?t.id=null:void 0},t.prototype.countdownInit=function(t){var s,o,e,a;return s=0,a=this,void 0!==t.id&&null!==t.id||(t.id="kk_"+Math.random((new Date).getTime())),s=a.countdowns[t.id]||0===a.countdowns[t.id]?a.countdowns[t.id]:t.data("seconds"),void 0===s&&(e=new Date,e=Math.floor(e.getTime()/1e3),o=t.data("time"),void 0===o&&(o=t.attr("time")),s=o-e),a.countdowns[t.id]=s-1,a.opts.warnClass&&s<a.opts.warnSeconds&&t.addClass(a.opts.warnClass),0>=s?(t.html(a.opts.textAfterCount),a.opts.callback?a.opts.callback.call(t):void 0):86400>=s?(this.countdown(!0,t,s),setTimeout(function(){return a.countdownInit(t)},1e3)):(this.countdown(!1,t,s),setTimeout(function(){return a.countdownInit(t)},1e3))},t.prototype.countdown=function(t,s,o){var e,a,n,d,r;return r=this,d=this.fixTime(o%60),o=Math.floor(o/60),n=this.fixTime(o%60),o=Math.floor(o/60),a=this.fixTime(o%24),o=Math.floor(o/24),e=o,r.opts.oneDayClass&&t&&s.addClass(r.opts.oneDayClass),r.opts.displayDays&&(0===e&&r.opts.displayZeroDays?(s.find("."+r.opts.boxDaysClass).html(e),s.find("."+r.opts.boxDaysTextClass).html(this.formatText(e,"day"))):e>0&&(s.find("."+r.opts.boxDaysClass).html(e),s.find("."+r.opts.boxDaysTextClass).html(this.formatText(e,"day")))),s.find("."+r.opts.boxHoursClass).html(a),s.find("."+r.opts.boxHoursTextClass).html(this.formatText(a,"hour")),s.find("."+r.opts.boxMinClass).html(n),s.find("."+r.opts.boxSecClass).html(d)},t.prototype.formatText=function(t,s){var o,e,a;return a=this,o=a.opts[s+"sText"],a.opts.rusNumbers?t>=5&&20>t?o=a.opts[s+"sText"]:(e=1*(""+t).replace(/^\d+(\d)$/,"$1"),o=1===e?a.opts[s+"Text"]:e>=2&&4>=e?a.opts[s+"s2Text"]:a.opts[s+"sText"]):o=1===t?a.opts[s+"Text"]:a.opts[s+"sText"]},t.prototype.fixTime=function(t){return t=10>t?"0"+t:t},t}(),jQuery.fn.extend({kkcountdown:function(s){return this.each(function(){var o,e;return o=$(this),e=o.data("kkcountdown"),e||o.data("kkcountdown",e=new t(this,s)),"string"==typeof s?e[s].apply(e,args):void 0})}})}).call(this);